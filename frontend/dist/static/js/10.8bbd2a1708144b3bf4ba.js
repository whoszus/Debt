webpackJsonp([10],{Mbux:function(t,e){},"u+hf":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),n=i.n(a),o=i("Gu7T"),l=i.n(o),s={components:{ImportResult:i("72MX").default},data:function(){return{fileList:[],importData:[],times:"",errors:[],uploading:!1,importResultVisible:!1,dataSource:[],paginationInfo:null,pagination:{pageSizeOptions:["10","20","30","40","100"],defaultCurrent:1,defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(t,e){return"显示 "+e[0]+" ~ "+e[1]+" 条记录，共 "+t+" 条记录"}},loading:!1}},computed:{columns:function(){return[{title:"字段1",dataIndex:"field1"},{title:"字段2",dataIndex:"field2"},{title:"字段3",dataIndex:"field3"},{title:"导入时间",dataIndex:"createTime"}]}},mounted:function(){this.fetch()},methods:{handleClose:function(){this.importResultVisible=!1},downloadTemplate:function(){this.$download("test/template",{},"导入模板.xlsx")},exportExcel:function(){this.$export("test/export")},handleRemove:function(t){if(this.uploading)this.$message.warning("文件导入中，请勿删除");else{var e=this.fileList.indexOf(t),i=this.fileList.slice();i.splice(e,1),this.fileList=i}},beforeUpload:function(t){return this.fileList=[].concat(l()(this.fileList),[t]),!1},handleUpload:function(){var t=this,e=this.fileList,i=new FormData;i.append("file",e[0]),this.uploading=!0,this.$upload("test/import",i).then(function(e){var i=e.data.data;i.data.length&&t.fetch(),t.importData=i.data,t.errors=i.error,t.times=i.time/1e3,t.uploading=!1,t.fileList=[],t.importResultVisible=!0}).catch(function(e){console.error(e),t.uploading=!1,t.fileList=[]})},handleTableChange:function(t,e,i){this.paginationInfo=t,this.fetch()},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,e.pageSize=this.paginationInfo.pageSize,e.pageNum=this.paginationInfo.current):(e.pageSize=this.pagination.defaultPageSize,e.pageNum=this.pagination.defaultCurrent),this.$get("test",n()({},e)).then(function(e){var i=e.data,a=n()({},t.pagination);a.total=i.total,t.loading=!1,t.dataSource=i.rows,t.pagination=a})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%"}},[i("div",{staticClass:"option-area"},[i("a-upload",{staticClass:"upload-area",attrs:{fileList:t.fileList,remove:t.handleRemove,disabled:1===t.fileList.length,beforeUpload:t.beforeUpload}},[i("a-button",[i("a-icon",{attrs:{type:"upload"}}),t._v(" 选择.xlsx文件\n      ")],1)],1),t._v(" "),i("div",{staticClass:"button-area"},[i("a-button",{staticStyle:{"margin-right":".5rem"},attrs:{type:"primary"},on:{click:t.downloadTemplate}},[t._v("\n        模板下载\n      ")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":".5rem"},on:{click:t.exportExcel}},[t._v("\n        导出Excel\n      ")]),t._v(" "),i("a-button",{attrs:{disabled:0===t.fileList.length,loading:t.uploading},on:{click:t.handleUpload}},[t._v("\n        "+t._s(t.uploading?"导入中":"导入Excel")+"\n      ")])],1)],1),t._v(" "),i("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[i("a-table",{ref:"TableInfo",attrs:{columns:t.columns,dataSource:t.dataSource,pagination:t.pagination,loading:t.loading,scroll:{x:900}},on:{change:t.handleTableChange}})],1),t._v(" "),i("import-result",{attrs:{importData:t.importData,errors:t.errors,times:t.times,importResultVisible:t.importResultVisible},on:{close:t.handleClose}})],1)},staticRenderFns:[]};var d=i("VU/8")(s,r,!1,function(t){i("Mbux")},"data-v-b0b93f24",null);e.default=d.exports}});
//# sourceMappingURL=10.8bbd2a1708144b3bf4ba.js.map